<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Champions Grid - MCOC Style</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

    body {
      font-family: 'Orbitron', sans-serif;
      background: #0c0c1c;
      color: #c0e0ff;
      margin: 20px;
      text-align: center;
    }

    h1 {
      text-shadow: 0 0 8px #00ffff;
    }

    .tags-container {
      margin-bottom: 20px;
    }

    .tag {
      display: inline-block;
      background: #061a40;
      border-radius: 20px;
      padding: 8px 16px;
      margin: 6px;
      cursor: pointer;
      color: #80dfff;
      text-transform: uppercase;
      font-weight: 600;
      box-shadow: 0 0 6px #0055ff88;
      transition: 0.3s;
    }

    .tag:hover {
      background: #0a2a70;
      box-shadow: 0 0 15px #00bfff, 0 0 30px #00ffffaa;
      color: #00ffff;
    }

    .tag.active {
      background: #00ffff;
      color: #000c1f;
      font-weight: 700;
      box-shadow: 0 0 15px #00ffff, inset 0 0 8px #00e5ff;
    }

    #resetFilters {
      padding: 10px 30px;
      margin-bottom: 30px;
      background: linear-gradient(90deg, #00c8ff, #0041ff);
      border: none;
      border-radius: 30px;
      color: #001a33;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 0 15px #0041ff;
      transition: 0.3s;
    }

    #resetFilters:hover {
      background: linear-gradient(90deg, #00ffff, #0077ff);
      box-shadow: 0 0 20px #00ffff, 0 0 30px #0077ff;
    }

    .champions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
      gap: 15px;
      max-width: 800px;
      margin: 0 auto;
    }

    .champion-img {
      width: 80px;
      height: 80px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 0 8px #0099ff;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    .champion-img:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px #00ffff;
    }

    .no-selection {
      color: #ccc;
      font-style: italic;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>Champions MCOC – Grille Interactive</h1>

<div class="tags-container" id="tagsContainer"></div>
<button id="resetFilters">Réinitialiser les filtres</button>

<div class="champions-grid" id="championsGrid">
  <p class="no-selection">Chargement des données...</p>
</div>

<script>
let data = null;
let activeTags = new Set();

const tagsContainer = document.getElementById('tagsContainer');
const championsGrid = document.getElementById('championsGrid');
const resetBtn = document.getElementById('resetFilters');

fetch('champions.json')
  .then(res => res.json())
  .then(json => {
    data = json;
    renderTags();
    updateUI();
  })
  .catch(err => {
    championsGrid.innerHTML = "<p class='no-selection'>Erreur lors du chargement des données.</p>";
    console.error(err);
  });

function renderTags() {
  const tagsSet = new Set();
  data.champions.forEach(champ => champ.tags.forEach(tag => tagsSet.add(tag)));
  const allTags = Array.from(tagsSet).sort();

  tagsContainer.innerHTML = '';
  allTags.forEach(tag => {
    const tagEl = document.createElement('span');
    tagEl.classList.add('tag');
    tagEl.textContent = tag;
    tagEl.addEventListener('click', () => {
      if (activeTags.has(tag)) {
        activeTags.delete(tag);
      } else {
        activeTags.add(tag);
      }
      updateUI();
    });
    tagsContainer.appendChild(tagEl);
  });
}

function updateUI() {
  // Marquer les tags actifs
  Array.from(tagsContainer.children).forEach(tagEl => {
    tagEl.classList.toggle('active', activeTags.has(tagEl.textContent));
  });

  let champs = data.champions;

  if (activeTags.size > 0) {
    champs = champs.filter(champ => {
      for (let tag of activeTags) {
        if (!champ.tags.includes(tag)) return false;
      }
      return true;
    });
  }

  championsGrid.innerHTML = '';

  if (champs.length === 0) {
    championsGrid.innerHTML = "<p class='no-selection'>Aucun champion ne correspond à ce filtre.</p>";
    return;
  }

  champs.forEach(champ => {
    const img = document.createElement('img');
    img.className = 'champion-img';
    img.src = champ.photo ? champ.photo : `https://placekitten.com/80/80?rand=${Math.random()}`;
    img.alt = champ.name;
    img.title = champ.name;
    championsGrid.appendChild(img);
  });
}

resetBtn.addEventListener('click', () => {
  activeTags.clear();
  updateUI();
});
</script>

</body>
</html>

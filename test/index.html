<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Filtre Multi-Tags - MCOC Style</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
  body {
    font-family: 'Orbitron', monospace, Arial, sans-serif;
    background: linear-gradient(135deg, #020111 0%, #3a3a52 100%);
    color: #c0e0ff;
    margin: 20px;
  }
  h1 {
    text-align: center;
    text-shadow: 0 0 6px #00ffff;
  }
  .tags-container {
    margin-bottom: 20px;
    text-align: center;
  }
  .tag {
    display: inline-block;
    background: #061a40;
    border-radius: 20px;
    padding: 8px 16px;
    margin: 6px 6px;
    cursor: pointer;
    color: #80dfff;
    text-transform: uppercase;
    font-weight: 600;
    user-select: none;
    box-shadow: 0 0 6px #0055ff88;
    transition: all 0.3s ease;
  }
  .tag:hover {
    background: #0a2a70;
    box-shadow: 0 0 15px #00bfff, 0 0 30px #00ffffaa;
    color: #00ffff;
  }
  .tag.active {
    background: #00ffff;
    color: #000c1f;
    box-shadow: 0 0 15px #00ffff, 0 0 25px #00bfff, inset 0 0 8px #00e5ff;
    font-weight: 700;
  }
  #resetFilters {
    display: block;
    margin: 0 auto 30px auto;
    padding: 10px 30px;
    background: linear-gradient(90deg, #00c8ff, #0041ff);
    border: none;
    border-radius: 30px;
    color: #001a33;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 0 15px #0041ff;
    transition: background 0.3s ease, box-shadow 0.3s ease;
    user-select: none;
  }
  #resetFilters:hover {
    background: linear-gradient(90deg, #00ffff, #0077ff);
    box-shadow: 0 0 20px #00ffff, 0 0 30px #0077ff;
  }
  .champions-list {
    max-width: 400px;
    margin: 0 auto;
    padding: 0;
    list-style-type: none;
    font-size: 1.1rem;
    letter-spacing: 0.05em;
  }
  .champions-list li {
    padding: 10px 15px;
    border-bottom: 1px solid #004080;
    transition: background 0.3s ease;
  }
  .champions-list li:hover {
    background: #004080cc;
    cursor: default;
  }
  .no-selection {
    text-align: center;
    font-style: italic;
    color: #3399ffaa;
  }
</style>
</head>
<body>

<h1>Filtrer les champions par Tag (multi)</h1>

<div class="tags-container" id="tagsContainer"></div>
<button id="resetFilters">Réinitialiser les filtres</button>

<ul class="champions-list" id="championsList">
  <li class="no-selection">Chargement des données...</li>
</ul>

<script>
let data = null;
let activeTags = new Set();

const tagsContainer = document.getElementById('tagsContainer');
const championsList = document.getElementById('championsList');
const resetBtn = document.getElementById('resetFilters');

fetch('champions.json')
  .then(response => {
    if (!response.ok) throw new Error("Erreur de chargement JSON");
    return response.json();
  })
  .then(json => {
    data = json;
    renderTags();
    updateUI();
  })
  .catch(err => {
    championsList.innerHTML = "<li>Erreur lors du chargement des données.</li>";
    console.error(err);
  });

function renderTags() {
  const tagsSet = new Set();
  data.champions.forEach(champ => champ.tags.forEach(tag => tagsSet.add(tag)));
  const allTags = Array.from(tagsSet).sort();

  tagsContainer.innerHTML = '';
  allTags.forEach(tag => {
    const tagEl = document.createElement('span');
    tagEl.classList.add('tag');
    tagEl.textContent = tag;
    tagEl.addEventListener('click', () => {
      if (activeTags.has(tag)) {
        activeTags.delete(tag);
      } else {
        activeTags.add(tag);
      }
      updateUI();
    });
    tagsContainer.appendChild(tagEl);
  });
}

function updateUI() {
  // Mise à jour visuelle des tags
  Array.from(tagsContainer.children).forEach(tagEl => {
    tagEl.classList.toggle('active', activeTags.has(tagEl.textContent));
  });

  if (activeTags.size === 0) {
    championsList.innerHTML = '<li class="no-selection">Sélectionnez un ou plusieurs tags pour afficher les champions.</li>';
    return;
  }

  // Filtrer les champions qui ont au moins TOUS les tags sélectionnés
  const filtered = data.champions.filter(champ => {
    for (let tag of activeTags) {
      if (!champ.tags.includes(tag)) return false;
    }
    return true;
  });

  if (filtered.length === 0) {
    championsList.innerHTML = '<li class="no-selection">Aucun champion ne correspond à ces tags.</li>';
    return;
  }

  championsList.innerHTML = '';
  filtered.forEach(champ => {
    const li = document.createElement('li');
    li.textContent = champ.name;
    championsList.appendChild(li);
  });
}

resetBtn.addEventListener('click', () => {
  activeTags.clear();
  updateUI();
});
</script>

</body>
</html>
